function t(t,e,i,n){Object.defineProperty(t,e,{get:i,set:n,enumerable:!0,configurable:!0})}var e=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire8ed7;e.register("89b0U",(function(i,n){t(i.exports,"diagram",(()=>j));var r=e("g56H2"),a=e("4LkSm"),s=e("2YFJl"),o=e("jmbVX"),d=e("evFAv"),l=e("3IUvT");e("i8Fxz"),e("gngdn"),e("hV1gR"),e("c0ySZ"),e("6Radu"),e("2ujND");const c="rect",p="rectWithTitle",g="statediagram",h=`${g}-state`,u="transition",y=`${u} note-edge`,f=`${g}-note`,x=`${g}-cluster`,b=`${g}-cluster-alt`,w="parent",m="note",T="----",v=`${T}${m}`,S=`${T}${w}`,$="fill:none",B="fill: #333",N="text",O="normal";let k={},E=0;function A(t="",e=0,i="",n=T){return`state-${t}${null!==i&&i.length>0?`${n}${i}`:""}-${e}`}const M=(t,e,i,n,a,s)=>{const d=i.id,l=null==(g=n[d])?"":g.classes?g.classes.join(" "):"";var g;if("root"!==d){let e=c;!0===i.start&&(e="start"),!1===i.start&&(e="end"),i.type!==r.a&&(e=i.type),k[d]||(k[d]={id:d,shape:e,description:o.e.sanitizeText(d,(0,o.g)()),classes:`${l} ${h}`});const n=k[d];i.description&&(Array.isArray(n.description)?(n.shape=p,n.description.push(i.description)):n.description.length>0?(n.shape=p,n.description===d?n.description=[i.description]:n.description=[n.description,i.description]):(n.shape=c,n.description=i.description),n.description=o.e.sanitizeTextOrArray(n.description,(0,o.g)())),1===n.description.length&&n.shape===p&&(n.shape=c),!n.type&&i.doc&&(o.l.info("Setting cluster for ",d,z(i)),n.type="group",n.dir=z(i),n.shape=i.type===r.b?"divider":"roundedWithTitle",n.classes=n.classes+" "+x+" "+(s?b:""));const a={labelStyle:"",shape:n.shape,labelText:n.description,classes:n.classes,style:"",id:d,dir:n.dir,domId:A(d,E),type:n.type,padding:15,centerLabel:!0};if(i.note){const e={labelStyle:"",shape:"note",labelText:i.note.text,classes:f,style:"",id:d+v+"-"+E,domId:A(d,E,m),type:n.type,padding:15},r={labelStyle:"",shape:"noteGroup",labelText:i.note.text,classes:n.classes,style:"",id:d+S,domId:A(d,E,w),type:"group",padding:0};E++;const s=d+S;t.setNode(s,r),t.setNode(e.id,e),t.setNode(d,a),t.setParent(d,s),t.setParent(e.id,s);let o=d,l=e.id;"left of"===i.note.position&&(o=e.id,l=d),t.setEdge(o,l,{arrowhead:"none",arrowType:"",style:$,labelStyle:"",classes:y,arrowheadStyle:B,labelpos:"c",labelType:N,thickness:O})}else t.setNode(d,a)}e&&"root"!==e.id&&(o.l.trace("Setting node ",d," to be child of its parent ",e.id),t.setParent(d,e.id)),i.doc&&(o.l.trace("Adding nodes children "),D(t,i,i.doc,n,a,!s))},D=(t,e,i,n,a,s)=>{o.l.trace("items",i),i.forEach((i=>{switch(i.stmt){case r.c:case r.a:M(t,e,i,n,a,s);break;case r.S:{M(t,e,i.state1,n,a,s),M(t,e,i.state2,n,a,s);const r={id:"edge"+E,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:$,labelStyle:"",label:o.e.sanitizeText(i.description,(0,o.g)()),arrowheadStyle:B,labelpos:"c",labelType:N,thickness:O,classes:u};t.setEdge(i.state1.id,i.state2.id,r,E),E++}}}))},z=(t,e=r.e)=>{let i=e;if(t.doc)for(let e=0;e<t.doc.length;e++){const n=t.doc[e];"dir"===n.stmt&&(i=n.value)}return i},R={setConf:function(t){const e=Object.keys(t);for(const i of e)t[i]},getClasses:function(t,e){o.l.trace("Extracting classes"),e.db.clear();try{return e.parser.parse(t),e.db.extract(e.db.getRootDocV2()),e.db.getClasses()}catch(t){return t}},draw:function(t,e,i,n){o.l.info("Drawing state diagram (v2)",e),k={};let p=n.db.getDirection();void 0===p&&(p=r.D);const{securityLevel:h,state:u}=(0,o.g)(),y=u.nodeSpacing||50,f=u.rankSpacing||50;o.l.info(n.db.getRootDocV2()),n.db.extract(n.db.getRootDocV2()),o.l.info(n.db.getRootDocV2());const x=n.db.getStates(),b=new a.Graph({multigraph:!0,compound:!0}).setGraph({rankdir:z(n.db.getRootDocV2()),nodesep:y,ranksep:f,marginx:8,marginy:8}).setDefaultEdgeLabel((function(){return{}}));let w;M(b,void 0,n.db.getRootDocV2(),x,n.db,!0),"sandbox"===h&&(w=(0,s.select)("#i"+e));const m="sandbox"===h?(0,s.select)(w.nodes()[0].contentDocument.body):(0,s.select)("body"),T=m.select(`[id="${e}"]`),v=m.select("#"+e+" g");(0,d.r)(v,b,["barb"],g,e);l.u.insertTitle(T,"statediagramTitleText",u.titleTopMargin,n.db.getDiagramTitle());const S=T.node().getBBox(),$=S.width+16,B=S.height+16;T.attr("class",g);const N=T.node().getBBox();(0,l.k)(T,B,$,u.useMaxWidth);const O=`${N.x-8} ${N.y-8} ${$} ${B}`;o.l.debug(`viewBox ${O}`),T.attr("viewBox",O);const E=document.querySelectorAll('[id="'+e+'"] .edgeLabel .label');for(const t of E){const e=t.getBBox(),i=document.createElementNS("http://www.w3.org/2000/svg",c);i.setAttribute("rx",0),i.setAttribute("ry",0),i.setAttribute("width",e.width),i.setAttribute("height",e.height),t.insertBefore(i,t.firstChild)}}},j={parser:r.p,db:r.d,renderer:R,styles:r.s,init:t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute,r.d.clear()}}})),e.register("eVRfl",(function(i,n){t(i.exports,"p",(()=>d)),t(i.exports,"s",(()=>u));var r=e("2YFJl"),a=e("3IUvT"),s=e("jmbVX");let o=0;const d=function(t){let e=t.match(/^([#+~-])?(\w+)(~\w+~|\[])?\s+(\w+) *([$*])?$/),i=t.match(/^([#+|~-])?(\w+) *\( *(.*)\) *([$*])? *(\w*[[\]|~]*\s*\w*~?)$/);return e&&!i?l(e):i?c(i):p(t)},l=function(t){let e="",i="";try{let n=t[1]?t[1].trim():"",r=t[2]?t[2].trim():"",a=t[3]?(0,s.z)(t[3].trim()):"",o=t[4]?t[4].trim():"",d=t[5]?t[5].trim():"";i=n+r+a+" "+o,e=h(d)}catch(e){i=t}return{displayText:i,cssStyle:e}},c=function(t){let e="",i="";try{let n=t[1]?t[1].trim():"",r=t[2]?t[2].trim():"",a=t[3]?(0,s.z)(t[3].trim()):"",o=t[4]?t[4].trim():"";i=n+r+"("+a+")"+(t[5]?" : "+(0,s.z)(t[5]).trim():""),e=h(o)}catch(e){i=t}return{displayText:i,cssStyle:e}},p=function(t){let e="",i="",n="",r=t.indexOf("("),a=t.indexOf(")");if(r>1&&a>r&&a<=t.length){let o="",d="",l=t.substring(0,1);l.match(/\w/)?d=t.substring(0,r).trim():(l.match(/[#+~-]/)&&(o=l),d=t.substring(1,r).trim());const c=t.substring(r+1,a);t.substring(a+1,1),i=h(t.substring(a+1,a+2)),e=o+d+"("+(0,s.z)(c.trim())+")",a<t.length&&(n=t.substring(a+2).trim(),""!==n&&(n=" : "+(0,s.z)(n),e+=n))}else e=(0,s.z)(t);return{displayText:e,cssStyle:i}},g=function(t,e,i,n){let r=d(e);const a=t.append("tspan").attr("x",n.padding).text(r.displayText);""!==r.cssStyle&&a.attr("style",r.cssStyle),i||a.attr("dy",n.textHeight)},h=function(t){switch(t){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}},u={drawClass:function(t,e,i,n){s.l.debug("Rendering class ",e,i);const r=e.id,a={id:r,label:e.id,width:0,height:0},o=t.append("g").attr("id",n.db.lookUpDomId(r)).attr("class","classGroup");let d;d=e.link?o.append("svg:a").attr("xlink:href",e.link).attr("target",e.linkTarget).append("text").attr("y",i.textHeight+i.padding).attr("x",0):o.append("text").attr("y",i.textHeight+i.padding).attr("x",0);let l=!0;e.annotations.forEach((function(t){const e=d.append("tspan").text("«"+t+"»");l||e.attr("dy",i.textHeight),l=!1}));let c=e.id;void 0!==e.type&&""!==e.type&&(c+="<"+e.type+">");const p=d.append("tspan").text(c).attr("class","title");l||p.attr("dy",i.textHeight);const h=d.node().getBBox().height,u=o.append("line").attr("x1",0).attr("y1",i.padding+h+i.dividerMargin/2).attr("y2",i.padding+h+i.dividerMargin/2),y=o.append("text").attr("x",i.padding).attr("y",h+i.dividerMargin+i.textHeight).attr("fill","white").attr("class","classText");l=!0,e.members.forEach((function(t){g(y,t,l,i),l=!1}));const f=y.node().getBBox(),x=o.append("line").attr("x1",0).attr("y1",i.padding+h+i.dividerMargin+f.height).attr("y2",i.padding+h+i.dividerMargin+f.height),b=o.append("text").attr("x",i.padding).attr("y",h+2*i.dividerMargin+f.height+i.textHeight).attr("fill","white").attr("class","classText");l=!0,e.methods.forEach((function(t){g(b,t,l,i),l=!1}));const w=o.node().getBBox();var m=" ";e.cssClasses.length>0&&(m+=e.cssClasses.join(" "));const T=o.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",w.width+2*i.padding).attr("height",w.height+i.padding+.5*i.dividerMargin).attr("class",m).node().getBBox().width;return d.node().childNodes.forEach((function(t){t.setAttribute("x",(T-t.getBBox().width)/2)})),e.tooltip&&d.insert("title").text(e.tooltip),u.attr("x2",T),x.attr("x2",T),a.width=T,a.height=w.height+i.padding+.5*i.dividerMargin,a},drawEdge:function(t,e,i,n,d){const l=function(t){switch(t){case d.db.relationType.AGGREGATION:return"aggregation";case d.db.relationType.EXTENSION:return"extension";case d.db.relationType.COMPOSITION:return"composition";case d.db.relationType.DEPENDENCY:return"dependency";case d.db.relationType.LOLLIPOP:return"lollipop"}};e.points=e.points.filter((t=>!Number.isNaN(t.y)));const c=e.points,p=(0,r.line)().x((function(t){return t.x})).y((function(t){return t.y})).curve(r.curveBasis),g=t.append("path").attr("d",p(c)).attr("id","edge"+o).attr("class","relation");let h,u,y="";n.arrowMarkerAbsolute&&(y=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,y=y.replace(/\(/g,"\\("),y=y.replace(/\)/g,"\\)")),1==i.relation.lineType&&g.attr("class","relation dashed-line"),10==i.relation.lineType&&g.attr("class","relation dotted-line"),"none"!==i.relation.type1&&g.attr("marker-start","url("+y+"#"+l(i.relation.type1)+"Start)"),"none"!==i.relation.type2&&g.attr("marker-end","url("+y+"#"+l(i.relation.type2)+"End)");const f=e.points.length;let x,b,w,m,T=a.u.calcLabelPosition(e.points);if(h=T.x,u=T.y,f%2!=0&&f>1){let t=a.u.calcCardinalityPosition("none"!==i.relation.type1,e.points,e.points[0]),n=a.u.calcCardinalityPosition("none"!==i.relation.type2,e.points,e.points[f-1]);s.l.debug("cardinality_1_point "+JSON.stringify(t)),s.l.debug("cardinality_2_point "+JSON.stringify(n)),x=t.x,b=t.y,w=n.x,m=n.y}if(void 0!==i.title){const e=t.append("g").attr("class","classLabel"),r=e.append("text").attr("class","label").attr("x",h).attr("y",u).attr("fill","red").attr("text-anchor","middle").text(i.title);window.label=r;const a=r.node().getBBox();e.insert("rect",":first-child").attr("class","box").attr("x",a.x-n.padding/2).attr("y",a.y-n.padding/2).attr("width",a.width+n.padding).attr("height",a.height+n.padding)}if(s.l.info("Rendering relation "+JSON.stringify(i)),void 0!==i.relationTitle1&&"none"!==i.relationTitle1){t.append("g").attr("class","cardinality").append("text").attr("class","type1").attr("x",x).attr("y",b).attr("fill","black").attr("font-size","6").text(i.relationTitle1)}if(void 0!==i.relationTitle2&&"none"!==i.relationTitle2){t.append("g").attr("class","cardinality").append("text").attr("class","type2").attr("x",w).attr("y",m).attr("fill","black").attr("font-size","6").text(i.relationTitle2)}o++},drawNote:function(t,e,i,n){s.l.debug("Rendering note ",e,i);const r=e.id,a={id:r,text:e.text,width:0,height:0},o=t.append("g").attr("id",r).attr("class","classGroup");let d=o.append("text").attr("y",i.textHeight+i.padding).attr("x",0);const l=JSON.parse(`"${e.text}"`).split("\n");l.forEach((function(t){s.l.debug(`Adding line: ${t}`),d.append("tspan").text(t).attr("class","title").attr("dy",i.textHeight)}));const c=o.node().getBBox(),p=o.insert("rect",":first-child").attr("x",0).attr("y",0).attr("width",c.width+2*i.padding).attr("height",c.height+l.length*i.textHeight+i.padding+.5*i.dividerMargin).node().getBBox().width;return d.node().childNodes.forEach((function(t){t.setAttribute("x",(p-t.getBBox().width)/2)})),a.width=p,a.height=c.height+l.length*i.textHeight+i.padding+.5*i.dividerMargin,a},parseMember:d}})),e.register("bzIQZ",(function(i,n){t(i.exports,"default",(()=>r));var r=(0,e("7N1cZ").default)(Object.getPrototypeOf,Object)})),e.register("3rtvu",(function(i,n){t(i.exports,"default",(()=>g));var r=e("hArsG"),a=e("bzIQZ"),s=e("f2iog"),o=Function.prototype,d=Object.prototype,l=o.toString,c=d.hasOwnProperty,p=l.call(Object);var g=function(t){if(!(0,s.default)(t)||"[object Object]"!=(0,r.default)(t))return!1;var e=(0,a.default)(t);if(null===e)return!0;var i=c.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&l.call(i)==p}}));
//# sourceMappingURL=stateDiagram-v2-9765461d.9c8d5661.js.map
